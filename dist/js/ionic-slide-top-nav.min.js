!function(){"use strict";angular.module("nx.widget",["ionic"])}(),function(){"use strict";var e=angular.module("nx.widget").directive("nxIonicSlideTopNav",["$timeout","$compile","$interval","$ionicSlideBoxDelegate","$ionicScrollDelegate","$ionicGesture",function(e,a,t,i,n,l){return{require:"^ionSlideBox",restrict:"A",link:function(t,l,r,o){var s,d,c,u,f,b,g,v={slideTabsScrollable:!0,indicatorRatio:1*r.indicatorRatio||0},p=function(){angular.isDefined(r.slideTabsScrollable)&&"false"===r.slideTabsScrollable&&(v.slideTabsScrollable=!1);var e='<li ng-repeat="(key, value) in tabs" ng-click="onTabTabbed($event, key)" class="slider-slide-tab" ng-bind-html="value"></li>';v.slideTabsScrollable?(c="ion-slide-tabs-handle-"+Math.floor(1e4*Math.random()+1),g=angular.element('<ion-scroll delegate-handle="'+c+'" class="slidingTabs" direction="x" scrollbar-x="false"><ul>'+e+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </ion-scroll>')):g=angular.element('<div class="slidingTabs" nx-prevent-body-move><ul>'+e+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </div>'),b=angular.element(l);var o=a(g);b.parent().prepend(g),o(t),f=angular.element(g[0].querySelector(".tab-indicator"));var u=b.attr("delegate-handle"),p=g.attr("delegate-handle");s=i,u&&(s=s.$getByHandle(u)),v.slideTabsScrollable&&(d=n,p&&(d=d.$getByHandle(p))),h(),m(),T()},h=function(){ionic.onGesture("dragleft",t.onSlideMove,b[0]),ionic.onGesture("dragright",t.onSlideMove,b[0]),ionic.onGesture("release",t.onSlideChange,b[0])},m=function(){if(!angular.isDefined(u)||0==u.length)return!1;var e=g.find("ul"),a=0;angular.forEach(u,function(e){var t=angular.element(e);a+=t[0].offsetWidth}),v.slideTabsScrollable?angular.element(g[0].querySelector(".scroll")).css("width",a+1+"px"):u.css("width",e[0].offsetWidth/u.length+"px"),T()},T=function(){if(!angular.isDefined(u)||0==u.length)return!1;var e=s.currentIndex(),a=angular.element(u[e]),t=a.prop("offsetLeft"),i=a[0].offsetWidth;if(f.css({"-webkit-transition-duration":"300ms","-webkit-transform":"translate("+(t+i*(v.indicatorRatio/2))+"px,0px)",width:i*(v.indicatorRatio||1)+"px"}),v.slideTabsScrollable&&d){var n=40;d.scrollTo(t-n,0,!0)}u.removeClass("tab-active"),a.addClass("tab-active")},S=function(e,a,t,i){var n=angular.element(u[a]),l=angular.element(u[e]),r=n.prop("offsetLeft"),o=l.prop("offsetLeft"),c=Math.abs(r-o);if(!(0==e&&a==s.slidesCount()-1&&"right"==i||0==a&&e==s.slidesCount()-1&&"left"==i)){var b=n[0].offsetWidth,g=l[0].offsetWidth,p=b-g,h=0,m=0;if(e>a?(h=r-c*(t-1),m=b-p*(1-t)):a>e&&(h=r+c*(t-1),m=b+p*(t-1)),f.css({"-webkit-transition-duration":"0ms","-webkit-transform":"translate("+h+"px,0px)",width:m*(v.indicatorRatio||1)+"px"}),v.slideTabsScrollable&&d){var T=40;d.scrollTo(h-T,0,!1)}}};t.onTabTabbed=function(e,a){s.slide(a),T()},t.tabs=[],t.addTabContent=function(a){t.tabs.push(a),t.$apply(),e(function(){u=angular.element(g[0].querySelector("ul").querySelectorAll(".slider-slide-tab")),T(),m()})},t.onSlideChange=function(e){T()},t.onSlideMove=function(){var e=b[0].getElementsByClassName("slider-slide"),a=s.currentIndex(),t=angular.element(e[a]),i=t.css("-webkit-transform").replace(/[^0-9\-.,]/g,"").split(",")[0],n=(a+1)%e.length;i>b.prop("offsetLeft")&&(n=a-1,n<0&&(n=e.length-1));var l=i/b[0].offsetWidth,r=l>0?"right":"left";l=Math.abs(l),S(a,n,l,r)},p()},controller:["$scope",function(a){this.addTab=function(t){e(function(){a.addTabContent&&a.addTabContent(t)})}}]}}]);e.directive("nxIonicSlideTabLabel",[function(){return{require:"^nxIonicSlideTopNav",link:function(e,a,t,i){i.addTab(t.nxIonicSlideTabLabel)}}}])}();