!function(){"use strict";angular.module("nx.widget",["ionic"])}(),function(){"use strict";var e=angular.module("nx.widget").directive("nxIonicSlideTopNav",["$timeout","$compile","$interval","$ionicSlideBoxDelegate","$ionicScrollDelegate","$ionicGesture",function(e,a,n,t,l,i){return{require:"^ionSlideBox",restrict:"A",link:function(n,i,o,r){var s,d,c,u,f,b,g,v={slideTabsScrollable:!0,followMove:"true"==o.followMove,indicatorRatio:1*o.indicatorRatio||0},p=function(){angular.isDefined(o.slideTabsScrollable)&&"false"===o.slideTabsScrollable&&(v.slideTabsScrollable=!1);var e='<li ng-repeat="(key, value) in tabs" ng-click="onTabTabbed($event, key)" class="slider-slide-tab" ng-bind-html="value"></li>';v.slideTabsScrollable?(c="ion-slide-tabs-handle-"+Math.floor(1e4*Math.random()+1),g=angular.element('<ion-scroll delegate-handle="'+c+'" class="slidingTabs" direction="x" scrollbar-x="false"><ul>'+e+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </ion-scroll>')):g=angular.element('<div class="slidingTabs" nx-prevent-body-move><ul>'+e+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </div>'),b=angular.element(i);var r=a(g);b.parent().prepend(g),r(n),f=angular.element(g[0].querySelector(".tab-indicator"));var u=b.attr("delegate-handle"),p=g.attr("delegate-handle");s=t,u&&(s=s.$getByHandle(u)),v.slideTabsScrollable&&(d=l,p&&(d=d.$getByHandle(p))),h(),m(),T()},h=function(){ionic.onGesture("dragleft",n.onSlideMove,b[0]),ionic.onGesture("dragright",n.onSlideMove,b[0]),ionic.onGesture("release",n.onSlideChange,b[0])},m=function(){if(!angular.isDefined(u)||0==u.length)return!1;var e=g.find("ul"),a=0;angular.forEach(u,function(e){var n=angular.element(e);a+=n[0].offsetWidth}),v.slideTabsScrollable?angular.element(g[0].querySelector(".scroll")).css("width",a+1+"px"):u.css("width",e[0].offsetWidth/u.length+"px"),T()},T=function(){if(!angular.isDefined(u)||0==u.length)return!1;var e=s.currentIndex(),a=angular.element(u[e]),n=a.prop("offsetLeft"),t=a[0].offsetWidth;if(f.css({"-webkit-transition-duration":"300ms","-webkit-transform":"translate("+(n+.5*(t-t*v.indicatorRatio))+"px,0px)",width:t*(v.indicatorRatio||1)+"px"}),v.slideTabsScrollable&&d){var l=40;d.scrollTo(n-l,0,!0)}u.removeClass("tab-active"),a.addClass("tab-active")},S=function(e,a,n,t){var l=angular.element(u[a]),i=angular.element(u[e]),o=l.prop("offsetLeft"),r=i.prop("offsetLeft"),c=Math.abs(o-r);if(!(0==e&&a==s.slidesCount()-1&&"right"==t||0==a&&e==s.slidesCount()-1&&"left"==t)){var b=l[0].offsetWidth,g=i[0].offsetWidth,p=b-g,h=0,m=0;if(e>a?(h=o-c*(n-1),m=b-p*(1-n)):a>e&&(h=o+c*(n-1),m=b+p*(n-1)),f.css({"-webkit-transition-duration":"0ms","-webkit-transform":"translate("+h+"px,0px)",width:m*(v.indicatorRatio||1)+"px"}),v.slideTabsScrollable&&d){var T=40;d.scrollTo(h-T,0,!1)}}};n.onTabTabbed=function(e,a){s.slide(a),T()},n.tabs=[],n.addTabContent=function(a){n.tabs.push(a),n.$apply(),e(function(){u=angular.element(g[0].querySelector("ul").querySelectorAll(".slider-slide-tab")),T(),m()})},n.onSlideChange=function(e){T(),angular.element(document.body).removeClass("pointer-none")},n.onSlideMove=function(){var e=b[0].getElementsByClassName("slider-slide"),a=s.currentIndex(),n=angular.element(e[a]),t=n.css("-webkit-transform").replace(/[^0-9\-.,]/g,"").split(",")[0],l=(a+1)%e.length;t>b.prop("offsetLeft")&&(l=a-1,l<0&&(l=e.length-1));var i=t/b[0].offsetWidth,o=i>0?"right":"left";i=Math.abs(i),v.followMove&&S(a,l,i,o),angular.element(document.body).addClass("pointer-none")},p()},controller:["$scope",function(a){this.addTab=function(n){e(function(){a.addTabContent&&a.addTabContent(n)})}}]}}]);e.directive("nxIonicSlideTabLabel",[function(){return{require:"^nxIonicSlideTopNav",link:function(e,a,n,t){t.addTab(n.nxIonicSlideTabLabel)}}}])}();