!function(){"use strict";angular.module("nx.widget",["ionic"])}(),function(){"use strict";var e=angular.module("nx.widget").directive("nxIonicSlideTopNav",["$timeout","$compile","$interval","$ionicSlideBoxDelegate","$ionicScrollDelegate","$ionicGesture",function(e,a,i,t,n,l){return{require:"^ionSlideBox",restrict:"A",link:function(i,l,r,o){var s,d,c,u,f,b,g,v={slideTabsScrollable:!0,indicatorRatio:1*r.indicatorRatio||0},p=function(){angular.isDefined(r.slideTabsScrollable)&&"false"===r.slideTabsScrollable&&(v.slideTabsScrollable=!1);var e='<li ng-repeat="(key, value) in tabs" ng-click="onTabTabbed($event, key)" class="slider-slide-tab" ng-bind-html="value"></li>';v.slideTabsScrollable?(c="ion-slide-tabs-handle-"+Math.floor(1e4*Math.random()+1),g=angular.element('<ion-scroll delegate-handle="'+c+'" class="slidingTabs" direction="x" scrollbar-x="false"><ul>'+e+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </ion-scroll>')):g=angular.element('<div class="slidingTabs"><ul>'+e+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </div>'),b=angular.element(l);var o=a(g);b.parent().prepend(g),o(i),f=angular.element(g[0].querySelector(".tab-indicator"));var u=b.attr("delegate-handle"),p=g.attr("delegate-handle");s=t,u&&(s=s.$getByHandle(u)),v.slideTabsScrollable&&(d=n,p&&(d=d.$getByHandle(p))),h(),T(),m()},h=function(){ionic.onGesture("dragleft",i.onSlideMove,b[0]),ionic.onGesture("dragright",i.onSlideMove,b[0]),ionic.onGesture("release",i.onSlideChange,b[0])},T=function(){if(!angular.isDefined(u)||0==u.length)return!1;var e=g.find("ul"),a=0;angular.forEach(u,function(e){var i=angular.element(e);a+=i[0].offsetWidth}),v.slideTabsScrollable?angular.element(g[0].querySelector(".scroll")).css("width",a+1+"px"):u.css("width",e[0].offsetWidth/u.length+"px"),m()},m=function(){if(!angular.isDefined(u)||0==u.length)return!1;var e=s.currentIndex(),a=angular.element(u[e]),i=a.prop("offsetLeft"),t=a[0].offsetWidth;if(f.css({"-webkit-transition-duration":"300ms","-webkit-transform":"translate("+(i+t*(v.indicatorRatio/2))+"px,0px)",width:t*(v.indicatorRatio||1)+"px"}),v.slideTabsScrollable&&d){var n=40;d.scrollTo(i-n,0,!0)}u.removeClass("tab-active"),a.addClass("tab-active")},S=function(e,a,i,t){var n=angular.element(u[a]),l=angular.element(u[e]),r=n.prop("offsetLeft"),o=l.prop("offsetLeft"),c=Math.abs(r-o);if(!(0==e&&a==s.slidesCount()-1&&"right"==t||0==a&&e==s.slidesCount()-1&&"left"==t)){var b=n[0].offsetWidth,g=l[0].offsetWidth,p=b-g,h=0,T=0;if(e>a?(h=r-c*(i-1),T=b-p*(1-i)):a>e&&(h=r+c*(i-1),T=b+p*(i-1)),f.css({"-webkit-transition-duration":"0ms","-webkit-transform":"translate("+h+"px,0px)",width:T*(v.indicatorRatio||1)+"px"}),v.slideTabsScrollable&&d){var m=40;d.scrollTo(h-m,0,!1)}}};i.onTabTabbed=function(e,a){s.slide(a),m()},i.tabs=[],i.addTabContent=function(a){i.tabs.push(a),i.$apply(),e(function(){u=angular.element(g[0].querySelector("ul").querySelectorAll(".slider-slide-tab")),m(),T()})},i.onSlideChange=function(e){m()},i.onSlideMove=function(){var e=b[0].getElementsByClassName("slider-slide"),a=s.currentIndex(),i=angular.element(e[a]),t=i.css("-webkit-transform").replace(/[^0-9\-.,]/g,"").split(",")[0],n=(a+1)%e.length;t>b.prop("offsetLeft")&&(n=a-1,n<0&&(n=e.length-1));var l=t/b[0].offsetWidth,r=l>0?"right":"left";l=Math.abs(l),S(a,n,l,r)},p()},controller:["$scope",function(a){this.addTab=function(i){e(function(){a.addTabContent&&a.addTabContent(i)})}}]}}]);e.directive("nxIonicSlideTabLabel",[function(){return{require:"^nxIonicSlideTopNav",link:function(e,a,i,t){t.addTab(i.nxIonicSlideTabLabel)}}}])}();