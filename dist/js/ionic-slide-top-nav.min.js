!function(){"use strict";angular.module("nx.widget",["ionic"])}(),function(){"use strict";var e=angular.module("nx.widget").directive("nxIonicSlideTopNav",["$timeout","$compile","$interval","$ionicSlideBoxDelegate","$ionicScrollDelegate","$ionicGesture",function(e,a,l,n,t,i){return{require:"^ionSlideBox",restrict:"A",link:function(l,i,o,r){var s,d,c,u,f,b,g;console.log(o);var v={cssClass:o.cssClass||"",slideTabsScrollable:!0,followMove:"true"==o.followMove,indicatorRatio:1*o.indicatorRatio||0},p=function(){angular.isDefined(o.slideTabsScrollable)&&"false"===o.slideTabsScrollable&&(v.slideTabsScrollable=!1);var e='<li ng-repeat="(key, value) in tabs" ng-click="onTabTabbed($event, key)" class="slider-slide-tab" ng-bind-html="value"></li>';v.slideTabsScrollable?(c="ion-slide-tabs-handle-"+Math.floor(1e4*Math.random()+1),g=angular.element('<ion-scroll delegate-handle="'+c+'" class="slidingTabs" direction="x" scrollbar-x="false"><ul>'+e+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </ion-scroll>')):g=angular.element('<div class="slidingTabs '+v.cssClass+'" nx-prevent-body-move><ul>'+e+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </div>'),b=angular.element(i);var r=a(g);b.parent().prepend(g),r(l),f=angular.element(g[0].querySelector(".tab-indicator"));var u=b.attr("delegate-handle"),p=g.attr("delegate-handle");s=n,u&&(s=s.$getByHandle(u)),v.slideTabsScrollable&&(d=t,p&&(d=d.$getByHandle(p))),h(),m(),T()},h=function(){ionic.onGesture("dragleft",l.onSlideMove,b[0]),ionic.onGesture("dragright",l.onSlideMove,b[0]),ionic.onGesture("release",l.onSlideChange,b[0])},m=function(){if(!angular.isDefined(u)||0==u.length)return!1;var e=g.find("ul"),a=0;angular.forEach(u,function(e){var l=angular.element(e);a+=l[0].offsetWidth}),v.slideTabsScrollable?angular.element(g[0].querySelector(".scroll")).css("width",a+1+"px"):u.css("width",e[0].offsetWidth/u.length+"px"),T()},T=function(){if(!angular.isDefined(u)||0==u.length)return!1;var e=s.currentIndex(),a=angular.element(u[e]),l=a.prop("offsetLeft"),n=a[0].offsetWidth;if(f.css({"-webkit-transition-duration":"300ms","-webkit-transform":"translate("+(l+.5*(n-n*v.indicatorRatio))+"px,0px)",width:n*(v.indicatorRatio||1)+"px"}),v.slideTabsScrollable&&d){var t=40;d.scrollTo(l-t,0,!0)}u.removeClass("tab-active"),a.addClass("tab-active")},S=function(e,a,l,n){var t=angular.element(u[a]),i=angular.element(u[e]),o=t.prop("offsetLeft"),r=i.prop("offsetLeft"),c=Math.abs(o-r);if(!(0==e&&a==s.slidesCount()-1&&"right"==n||0==a&&e==s.slidesCount()-1&&"left"==n)){var b=t[0].offsetWidth,g=i[0].offsetWidth,p=b-g,h=0,m=0;if(e>a?(h=o-c*(l-1),m=b-p*(1-l)):a>e&&(h=o+c*(l-1),m=b+p*(l-1)),f.css({"-webkit-transition-duration":"0ms","-webkit-transform":"translate("+h+"px,0px)",width:m*(v.indicatorRatio||1)+"px"}),v.slideTabsScrollable&&d){var T=40;d.scrollTo(h-T,0,!1)}}};l.onTabTabbed=function(e,a){s.slide(a),T()},l.tabs=[],l.addTabContent=function(a){l.tabs.push(a),l.$apply(),e(function(){u=angular.element(g[0].querySelector("ul").querySelectorAll(".slider-slide-tab")),T(),m()})},l.onSlideChange=function(e){T(),angular.element(document.body).removeClass("pointer-none")},l.onSlideMove=function(){var e=b[0].getElementsByClassName("slider-slide"),a=s.currentIndex(),l=angular.element(e[a]),n=l.css("-webkit-transform").replace(/[^0-9\-.,]/g,"").split(",")[0],t=(a+1)%e.length;n>b.prop("offsetLeft")&&(t=a-1,t<0&&(t=e.length-1));var i=n/b[0].offsetWidth,o=i>0?"right":"left";i=Math.abs(i),v.followMove&&S(a,t,i,o),angular.element(document.body).addClass("pointer-none")},p()},controller:["$scope",function(a){this.addTab=function(l){e(function(){a.addTabContent&&a.addTabContent(l)})}}]}}]);e.directive("nxIonicSlideTabLabel",[function(){return{require:"^nxIonicSlideTopNav",link:function(e,a,l,n){n.addTab(l.nxIonicSlideTabLabel)}}}])}();